[{"/Users/ostrovsky/dev/react-mesto-auth/src/index.js":"1","/Users/ostrovsky/dev/react-mesto-auth/src/reportWebVitals.js":"2","/Users/ostrovsky/dev/react-mesto-auth/src/components/App.js":"3","/Users/ostrovsky/dev/react-mesto-auth/src/utils/api.js":"4","/Users/ostrovsky/dev/react-mesto-auth/src/components/Footer.js":"5","/Users/ostrovsky/dev/react-mesto-auth/src/components/Main.js":"6","/Users/ostrovsky/dev/react-mesto-auth/src/components/EditProfilePopup.js":"7","/Users/ostrovsky/dev/react-mesto-auth/src/components/ImagePopup.js":"8","/Users/ostrovsky/dev/react-mesto-auth/src/components/Header.js":"9","/Users/ostrovsky/dev/react-mesto-auth/src/components/ConfirmationPopup.js":"10","/Users/ostrovsky/dev/react-mesto-auth/src/components/EditAvatarPopup.js":"11","/Users/ostrovsky/dev/react-mesto-auth/src/components/AddPlacePopup.js":"12","/Users/ostrovsky/dev/react-mesto-auth/src/contexts/CurrentUserContext.js":"13","/Users/ostrovsky/dev/react-mesto-auth/src/components/Card.js":"14","/Users/ostrovsky/dev/react-mesto-auth/src/components/PopupWithForm.js":"15","/Users/ostrovsky/dev/react-mesto-auth/src/components/Login.js":"16","/Users/ostrovsky/dev/react-mesto-auth/src/components/ProtectedRoute.js":"17","/Users/ostrovsky/dev/react-mesto-auth/src/components/Register.js":"18","/Users/ostrovsky/dev/react-mesto-auth/src/auth.js":"19","/Users/ostrovsky/dev/react-mesto-auth/src/components/InfoTooltip.js":"20"},{"size":639,"mtime":1612632016827,"results":"21","hashOfConfig":"22"},{"size":362,"mtime":1612350252007,"results":"23","hashOfConfig":"22"},{"size":6732,"mtime":1612632453704,"results":"24","hashOfConfig":"22"},{"size":3428,"mtime":1612350252009,"results":"25","hashOfConfig":"22"},{"size":179,"mtime":1612350251956,"results":"26","hashOfConfig":"22"},{"size":1735,"mtime":1612630234562,"results":"27","hashOfConfig":"22"},{"size":1821,"mtime":1612350251955,"results":"28","hashOfConfig":"22"},{"size":537,"mtime":1612350251958,"results":"29","hashOfConfig":"22"},{"size":1077,"mtime":1612548284839,"results":"30","hashOfConfig":"22"},{"size":320,"mtime":1612350251953,"results":"31","hashOfConfig":"22"},{"size":877,"mtime":1612350251954,"results":"32","hashOfConfig":"22"},{"size":1246,"mtime":1612350251950,"results":"33","hashOfConfig":"22"},{"size":85,"mtime":1612350251961,"results":"34","hashOfConfig":"22"},{"size":1242,"mtime":1612350251952,"results":"35","hashOfConfig":"22"},{"size":581,"mtime":1612350251960,"results":"36","hashOfConfig":"22"},{"size":1136,"mtime":1612632210984,"results":"37","hashOfConfig":"22"},{"size":318,"mtime":1612463445623,"results":"38","hashOfConfig":"22"},{"size":1408,"mtime":1612632968662,"results":"39","hashOfConfig":"22"},{"size":1089,"mtime":1612471458570,"results":"40","hashOfConfig":"22"},{"size":568,"mtime":1612553734307,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"6ly2ar",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"44"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"/Users/ostrovsky/dev/react-mesto-auth/src/index.js",[],["84","85"],"/Users/ostrovsky/dev/react-mesto-auth/src/reportWebVitals.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/App.js",["86"],"import React, { useState, useEffect, useCallback } from 'react';\nimport '../index.css';\nimport api from '../utils/api.js';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport statusSuccess from '../images/register-success.png';\nimport statusFail from '../images/register-fail.png';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmationPopup from './ConfirmationPopup';\nimport Login from './Login';\nimport Register from './Register';\nimport * as auth from '../auth.js';\nimport ProtectedRoute from './ProtectedRoute';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isRegisterPopupOpen, setIsRegisterPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({isOpen: false, img:{}});\n  const [registrationStatus, setRegistrationStatus] = useState({message:'', img:''})\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setloggedIn] = useState(false);\n  const [email, setEmail] = useState('');\n\n  const history = useHistory();\n\n  useEffect( () => {\n    api.getInitialCards()\n    .then((result) => {\n      setCards(result);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n\n    api.getInitialUsers()\n    .then((result) => {\n      setCurrentUser(result);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n  }, []);\n\n  const handleTokenCheck = useCallback(() => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt){\n      auth.getContent(jwt).then((res) => {\n        if (res){\n          const { email } = res.data;\n          setloggedIn(true);\n          setEmail(email);\n          if (history) {\n            history.push(\"/\");\n          }\n        }\n     });\n    }\n  }, []);\n\n  useEffect(() => {\n    handleTokenCheck();\n  },[handleTokenCheck]);\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  const handleCardClick = (e) => {\n    setSelectedCard({...selectedCard, isOpen:true, img: e.target} );\n  }\n\n  function handleRegisterStatus(status) {\n    const { message, img } = status;\n    setIsRegisterPopupOpen(true);\n    setRegistrationStatus({...registrationStatus, message:message, img:img})\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsRegisterPopupOpen(false);\n    setSelectedCard({isOpen: false, img:{}});\n  }\n\n  const handleLogin = ({ email, password }) => {\n    auth.authorize(email, password)\n    .then((data) => {\n    if (data.token){\n      setloggedIn(true);\n      handleEmailHeading(email);\n      history.push('/');\n    }\n  })\n    .catch(err => console.log(err));\n  }\n\n  const handleRegister = ({ email, password }) => {\n    auth.register(password, email).then((res) => {\n      if(res){\n        handleRegisterStatus({\n          message: 'Вы успешно зарегистрировались!',\n          img: statusSuccess\n        });\n        history.push('/signin');\n      } else {\n        handleRegisterStatus({\n          message: 'Что-то пошло не так! Попробуйте еще раз.',\n          img: statusFail\n        })\n      }\n    });\n  }\n\n  function handleUpdateUser(userInfo) {\n    api.saveUserInfo(userInfo)\n    .then((result) => {\n      setCurrentUser(result);\n      setIsEditProfilePopupOpen(false);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.saveUserAvatar(avatar)\n    .then((result) => {\n      setCurrentUser(result);\n      setIsEditAvatarPopupOpen(false);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleAddPlaceSubmit(newCard) {\n    api.postNewCard(newCard)\n    .then((newCard) => {\n      setCards([newCard, ...cards]);\n      setIsAddPlacePopupOpen(false);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n    .then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.delCard(card._id)\n    .then(() => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleEmailHeading(email) {\n    setEmail(email);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n    <div className=\"page\">\n    <Header email={email} />\n    <Switch>\n    <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Main}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          cards={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete} />\n    <Route path=\"/signup\">\n      <Register handleRegister={handleRegister}/>\n    </Route>\n    <Route path=\"/signin\">\n      <Login handleLogin={handleLogin}\n             handleEmailHeading={handleEmailHeading}  />\n    </Route>\n    <Route>\n      <Redirect to=\"/signin\" />\n    </Route>\n    </Switch>\n    <EditProfilePopup isOpen={isEditProfilePopupOpen}\n                      onClose={closeAllPopups}\n                      onUpdateUser={handleUpdateUser} />\n    <AddPlacePopup  isOpen={isAddPlacePopupOpen}\n                    onClose={closeAllPopups}\n                    onAddPlace={handleAddPlaceSubmit} />\n    <ConfirmationPopup />\n    <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n    <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n    <InfoTooltip isOpen={isRegisterPopupOpen} onClose={closeAllPopups} status={registrationStatus} />\n    {loggedIn && <Footer />}\n    </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","/Users/ostrovsky/dev/react-mesto-auth/src/utils/api.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/Footer.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/Main.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/EditProfilePopup.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/ImagePopup.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/Header.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/ConfirmationPopup.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/EditAvatarPopup.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/AddPlacePopup.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/contexts/CurrentUserContext.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/Card.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/PopupWithForm.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/Login.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/ProtectedRoute.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/Register.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/auth.js",[],"/Users/ostrovsky/dev/react-mesto-auth/src/components/InfoTooltip.js",[],{"ruleId":"87","replacedBy":"88"},{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","severity":1,"message":"92","line":68,"column":6,"nodeType":"93","endLine":68,"endColumn":8,"suggestions":"94"},"no-native-reassign",["95"],"no-negated-in-lhs",["96"],"react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["97"],"no-global-assign","no-unsafe-negation",{"desc":"98","fix":"99"},"Update the dependencies array to be: [history]",{"range":"100","text":"101"},[2263,2265],"[history]"]